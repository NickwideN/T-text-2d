# Text Editor

</table>


<p>Реализовать функцию Undo-Redo для текстового редактора. Программа получает на входе
последовательность символов, вводимую пользователем. Для разделения строк используется
символ '\n'. В тексте используются следующие спецсимволы:<br/>
•  &lt; — переход на один символ влево или в конец предыдущей строки<br/>
•  &gt; — переход на один символ вправо или в начало следующей строки<br/>
•  ^ — переход на строку выше<br/>
•  | — переход на строку ниже<br/>
•  # — удаление символа (нажатие Del)<br/>
•  @ — отмена последнего действия (Undo)<br/>
•  $ — повтор последнего отмененного действия (Redo)
</p><p>
Undo и Redo могут встречаться подряд несколько раз.
Программа должна вывести текст, получившийся в результате такого редактирования.
</p><p>
Вот правила, более чётко определяющие поведение текстового редактора.<br/>
Каждая строка текста заканчивается символом перевода строки, в том числе последняя. Вначале текст содержит одну пустую строку. Текущее место редактирования опредляется позицией в тексте, которую назовём курсором. Курсор никогда не выходит за пределы текста: например, нажатие "вверх" во время редактирования первой строки не приводит к перемещению курсора.  Если курсор с помощью символов ^ (вверх) или | (вниз) перемещается на строку, длина которой меньше его текущей горизонтальной позиции, то курсор ставится в конец строки. Отменить/повторить можно действия добавления и удаления символа (в том числе перевода строки, в результате чего строка расщепляется или сливается с соседней). Нерезультативное действие не запоминается (например нажатие Del, когда курсор находится в самом конце текста). Команда Undo в момент, когда нет действий для отмены, не является ошибкой, также как и команда Redo, если нет действий для повтора. После отмены действия курсор возвращается в позицию, которую имел непосредственно перед выполнением этого действия.</p>
    <h3>Input format</h3>
       <p>На вход подаётся последовательность латинский букв, цифр, пробелов, знаков препинания и переводов строк, а также описанных выше специальных символов — суммарной длиной не более 500000.<br/>
Гарантируется, что при редактировании текста никакая строка не становилась длиннее 100 символов.</p>
    <h3>Output format</h3>
         <p>Вывести получившийся текст.</p>
    <h3>Examples</h3><table class="b1"><tr><td class="b1" align="center"><b>Input</b></td><td class="b1" align="center"><b>Output</b></td></tr><tr><td class="b1" valign="top"><pre>I a&lt;#often set and wish that i
Could be a kite up in the sky,^&lt;#I|&gt;&gt;&gt;&gt;&gt;&gt;&gt;
And ridee@ upon the@@$$$$$$ breeze and go
Whichever way I CHA@@@chanced to blow.</pre></td><td class="b1" valign="top"><pre>I often set and wish that I
Could be a kite up in the sky,
And ride upon the breeze and go
Whichever way I chanced to blow.</pre></td></tr></table><h3>Submit a solution</h3><form method="post" enctype="multipart/form-data" action="http://diht.vdi.mipt.ru/cgi-bin/new-client"><input type="hidden" name="SID" value="9b20a0ff61dd23d2"/><input type="hidden" name="prob_id" value="20" />
<table class="b0">
